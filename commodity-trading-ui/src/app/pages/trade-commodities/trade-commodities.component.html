<div class="dashboard-container">
  <!-- Header section with gradient background -->
  <div class="header-section">
    <div class="header-content">
      <h1 class="welcome-message">Welcome to Commodity Trading! </h1>
      <p class="sub-heading">Track, analyze, and trade these commodities.</p>
    </div>
  </div>

  <!-- Main content section -->
  <div class="content-section">
    <mat-card class="controls-card">
      <mat-card-content>
        <div class="controls-container">
          <!-- Search input -->
          <div class="search-container">
            <mat-form-field appearance="outline" class="search-field">
              <mat-label>Search Commodities</mat-label>
              <input matInput type="text" [(ngModel)]="searchQuery" (keyup)="searchCommodities()">
              <button *ngIf="searchQuery" matSuffix mat-icon-button aria-label="Clear" (click)="clearSearch()">
                <mat-icon>close</mat-icon>
              </button>
              <mat-icon matPrefix>search</mat-icon>
            </mat-form-field>
          </div>

          <!-- Sort dropdown -->
          <div class="sorting-container">
            <mat-form-field appearance="outline" class="sort-dropdown">
              <mat-label>Sort By</mat-label>
              <mat-select [(value)]="selectedSort" (selectionChange)="sortCommodities()">
                <mat-option value="name-asc">Name (A-Z)</mat-option>
                <mat-option value="name-desc">Name (Z-A)</mat-option>
                <mat-option value="currentPrice-asc">Price (Low-High)</mat-option>
                <mat-option value="currentPrice-desc">Price (High-Low)</mat-option>
              </mat-select>
              <mat-icon matPrefix>sort</mat-icon>
            </mat-form-field>
          </div>
        </div>
      </mat-card-content>
    </mat-card>

    <!-- Stats summary -->
    <!-- <div class="stats-container">
      <mat-card class="stat-card">
        <mat-icon class="stat-icon">trending_up</mat-icon>
        <div class="stat-content">
          <h3>Total Commodities</h3>
          <p class="stat-value">{{totalItems}}</p>
        </div>
      </mat-card>
    </div> -->

    <!-- Results section -->
    <div class="results-section">
      <!-- No results message -->
      <div *ngIf="filteredCommodities.length === 0" class="no-results">
        <mat-icon>sentiment_dissatisfied</mat-icon>
        <p>No commodities found matching "{{searchQuery}}"</p>
        <button mat-raised-button color="warn" (click)="clearSearch()">Clear Search</button>
      </div>

      <!-- Commodity chart component -->
      <app-commodity-chart 
        *ngIf="filteredCommodities.length > 0"
        [commodities]="paginatedCommodities" 
        (trade)="openTradePopup($event)">
      </app-commodity-chart>

      <!-- Pagination controls -->
      <mat-paginator 
        *ngIf="filteredCommodities.length > 0"
        [length]="totalItems"
        [pageSize]="pageSize"
        [pageSizeOptions]="pageSizeOptions"
        [pageIndex]="pageIndex"
        (page)="onPageChange($event)"
        class="paginator">
      </mat-paginator>
    </div>
  </div>
</div>